name: APPDOME_CI_EXAMPLE
# Controls when the workflow will run
on:
 # Triggers the workflow on push or pull request events but only for the "main" branch
 push:
  branches: [ "github" ]
 pull_request:
  branches: [ "github" ]
 # Allows you to run this workflow manually from the Actions tab
 workflow_dispatch:
# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
 # This workflow contains a single job called "build"
 a:
 # The type of runner that the job will run on
  runs-on: ubuntu-latest
 # Steps represent a sequence of tasks that will be executed as part of the job
  steps:
 # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
   - uses: actions/checkout@v3
   - name: Appdome build-2secure
  # You may pin to the exact commit or the version.
     uses: Appdome/github_build-2secure@latest
     with:
       APPDOME_API_TOKEN: ${{secrets.APPDOME_API_KEY}}
       SIGN_OPTIONS: "SIGN_ON_APPDOME"

       # iOS
       # APP_FILE: "./filefinder.ipa"
       # CERTIFICATE_FILE: "https://appdome-automation-vanilla-apps.s3.eu-central-1.amazonaws.com/Thomas/AutomationCert.p12?response-content-disposition=inline&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEN%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaDGV1LWNlbnRyYWwtMSJGMEQCIEwbEdrG%2FzuGUhuh4p1aSqrAo62YH%2Bt%2FsLBhR3nMEHVtAiBmN2VNees3b40FVG6OdN%2Bw6zZ9aGxhV2UEFHfU2XFdyyqOAwjo%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F8BEAAaDDMwMjI2NzY1NDM5NCIM%2FXeFpKtFFykaZeevKuICq3NWEin87dGNdNzEJCMVnc%2FzKtOKqjGvu290BI4tu1aetKQXLnWQ29f8pLKl1D4%2Bb9HTPgbXA%2BeZPEnIo8wfXyfPWjAFm0eLETvY7%2BJckAkmRbrszGWYjEN3koLyOWOpINk0v5qDU6sc%2BdjBoiXsqq65jKwjMzkp8xC%2BZkbjgSmXuu00ZLK4jHBpSvtfwWaK3%2BgdnSNgJXRs3VZ0jt1Ky8Km%2FWDrWYhh4wcK3%2FkHNhxy15ircgD6EZFjf5wPGV5N4SiOu9Uoq1gtuVvWebtKlkV%2FEpixWt3ykkiW2wsgNyXXH4qlutphnuImHngy9lwxxe88wa247H91k3E58pw8a8TUO4STShDsjzlzlu43CUK38%2BGPEDS4RapGt9d7Wa62EYNXAKCMNdFB%2BaKvS0Gl8UD6z0BQNjvTBzUWzIv2ofj9QVfuZrfk4lqnQGD%2Fc7PFMrYnRMN4YvzTJH4Otma57jQQMKyFmakGOrQCOG7pG1JqROHzzWciQqIB2QG9VwpNh9EEA5r5wJbTjsEiyUQ704ekgX8%2Bmosee%2B0j3oDBxx03yR65hProMPXA7S%2FVpx8m8QhLBRYUXPywDFomVnMbZC%2FL0rRDtxR%2Bh1Ilz8XGZWHb09xxxPINmf%2Ba5rQnJn9THXsfSi1qheuz8OCu141GEvz2vjYmHG3vxJvnSj1unt%2FAdwXgvzoIn8N1fp0jbyNFgM%2BNf7FXrLqkycDnuBQGQLikP96Qze9x8qFSDxK%2FDX1QXbYMHZ8cMfXQvZo8IlPHh%2FpbdhdK2A1qTR9rPwLXwcy49J8zxe74poxXxuh50j1D1gkYX%2FdvbUjNT4oPgFrAdu99cm56jLQDFrYeLDGIEliysj3nVHznDDlXtqPYTCoaMqxuhCiafj61jof7eEA%3D&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20231011T072228Z&X-Amz-SignedHeaders=host&X-Amz-Expires=28800&X-Amz-Credential=ASIAUMYEOMD5HCOVWKGZ%2F20231011%2Feu-central-1%2Fs3%2Faws4_request&X-Amz-Signature=af88e3cec2185c2658e543f7b89b68254fa42e2c6aa84a1b8eb1bcf09f1ebcff"
       # CERTIFICATE_PASSWORD: "nf1101"
       # MOBILE_PROVISION_PROFILE_FILE: "https://appdome-automation-vanilla-apps.s3.eu-central-1.amazonaws.com/Thomas/Automation.mobileprovision?response-content-disposition=inline&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEPn%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaDGV1LWNlbnRyYWwtMSJIMEYCIQDvNbPR%2BEqQxW7HS3FO%2BotTLh8vy8g5AQ1Ndf7H947VGQIhAK71mN%2BXSdAhY3k3steOZVqnvSvONgKoDJSbtQ6UvwYiKoUDCBIQABoMMzAyMjY3NjU0Mzk0IgxnZkA9%2BzLQ1TqWkTYq4gL1bRfrsKxCqls9cbdS3TW9x4De6RUu1APXppUdN8x5JBiAfRUKRLddZRNyDDYp%2FSdpAm0wKynZJoStDyaza6K%2BwPOQNNb4i9ZjQitMc95QjrD0L0IBYQxHHivL4lmkm8v8LCW%2FB40CEUyy8TUMNT7ucbHjZg0w0DyUP6XkEqUDC6FBt6%2FR9p5S1nUkTIZUJs7GTZkBa3Gqi7b8tDwQWkalynr77ZithY%2BTa3L4mexKDnHYi6t8E7jV2Nohdi10FsS6rsu3S4KHSsZsTdOC6tI2xO%2BcbmkBbjGiQ37QeqJzCL0Q2oHZ1RFetkfkITzde6lTK2UMt7P6EJegqJ2Aa3XcUtYH1%2B0X5%2BWrSctVY2jif5ygdq5qJcwUIk0Mn2ybJJd5U82giS3dBigEY5KoZlimnMiFbxvCWZhXBXh%2Bcce4ndFT5BFf462xjHmu3FP6pDjivSZ0Ll97Q2JjvURk2ENi6qYw8OKeqQY6sgLSq1X4bjmOuy%2BO5ZoLT9t0PMVGDGaSaopy1KTjkBIrpfbql%2Blh4A6b6dfYSfo%2F6CwZ1y1WASHTGnH3oxpDqn1pZAZS%2FVJAScL40YK4vnLaxk6XMhqfv4CzELf1vSsuhVJoJ5KVFlkjzrx0qWHWGuET7N4KwLqUg9o5fS9b8ZFmSVZHlmE5TcrNeetNj1lOLUK47f1ka5OHfEg5VqOzooh8oXVZDANjBvqFzfLn0Ua00wAisCUU6po5gVJW3DJJZ1mcwS%2BCPQa2f7o8rNBrqFJtuYRBwBKdoWIycSDehGB2bITig5oRFjDvYGu2w1wpLTrHjmT8ZoUFeFoBG5Z9en8glbxdr0l9oa88CGDn9tSE8gsekt5T3ibiWwoVkDqIB2ZFUdIRHa8ZltMDEv8%2FJVVCOmY%3D&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20231012T092012Z&X-Amz-SignedHeaders=host&X-Amz-Expires=28800&X-Amz-Credential=ASIAUMYEOMD5N76PTTMB%2F20231012%2Feu-central-1%2Fs3%2Faws4_request&X-Amz-Signature=315640d20b4113a74d5387b2cc3ea4bfd876c31a0b45e615b2bb44f275afd38b"
       # ENTITLEMENTS_FILE: "https://appdome-automation-vanilla-apps.s3.eu-central-1.amazonaws.com/Thomas/AutomationEntitlements.plist?response-content-disposition=inline&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEN%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaDGV1LWNlbnRyYWwtMSJGMEQCIEwbEdrG%2FzuGUhuh4p1aSqrAo62YH%2Bt%2FsLBhR3nMEHVtAiBmN2VNees3b40FVG6OdN%2Bw6zZ9aGxhV2UEFHfU2XFdyyqOAwjo%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F8BEAAaDDMwMjI2NzY1NDM5NCIM%2FXeFpKtFFykaZeevKuICq3NWEin87dGNdNzEJCMVnc%2FzKtOKqjGvu290BI4tu1aetKQXLnWQ29f8pLKl1D4%2Bb9HTPgbXA%2BeZPEnIo8wfXyfPWjAFm0eLETvY7%2BJckAkmRbrszGWYjEN3koLyOWOpINk0v5qDU6sc%2BdjBoiXsqq65jKwjMzkp8xC%2BZkbjgSmXuu00ZLK4jHBpSvtfwWaK3%2BgdnSNgJXRs3VZ0jt1Ky8Km%2FWDrWYhh4wcK3%2FkHNhxy15ircgD6EZFjf5wPGV5N4SiOu9Uoq1gtuVvWebtKlkV%2FEpixWt3ykkiW2wsgNyXXH4qlutphnuImHngy9lwxxe88wa247H91k3E58pw8a8TUO4STShDsjzlzlu43CUK38%2BGPEDS4RapGt9d7Wa62EYNXAKCMNdFB%2BaKvS0Gl8UD6z0BQNjvTBzUWzIv2ofj9QVfuZrfk4lqnQGD%2Fc7PFMrYnRMN4YvzTJH4Otma57jQQMKyFmakGOrQCOG7pG1JqROHzzWciQqIB2QG9VwpNh9EEA5r5wJbTjsEiyUQ704ekgX8%2Bmosee%2B0j3oDBxx03yR65hProMPXA7S%2FVpx8m8QhLBRYUXPywDFomVnMbZC%2FL0rRDtxR%2Bh1Ilz8XGZWHb09xxxPINmf%2Ba5rQnJn9THXsfSi1qheuz8OCu141GEvz2vjYmHG3vxJvnSj1unt%2FAdwXgvzoIn8N1fp0jbyNFgM%2BNf7FXrLqkycDnuBQGQLikP96Qze9x8qFSDxK%2FDX1QXbYMHZ8cMfXQvZo8IlPHh%2FpbdhdK2A1qTR9rPwLXwcy49J8zxe74poxXxuh50j1D1gkYX%2FdvbUjNT4oPgFrAdu99cm56jLQDFrYeLDGIEliysj3nVHznDDlXtqPYTCoaMqxuhCiafj61jof7eEA%3D&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20231011T072355Z&X-Amz-SignedHeaders=host&X-Amz-Expires=28800&X-Amz-Credential=ASIAUMYEOMD5HCOVWKGZ%2F20231011%2Feu-central-1%2Fs3%2Faws4_request&X-Amz-Signature=0b2106af3078eaad6935b36088b5c6e16365b8644c8e062ac667b8ea735ffafa"
       # FUSION_SET_ID:  "dd6b1360-5864-11ee-96fa-bb616f57e574"

       # Android
       APP_FILE: "./FileFinder.aab"
       KEYSTORE_FILE: "https://appdome-automation-vanilla-apps.s3.eu-central-1.amazonaws.com/Thomas/appdome.keystore?response-content-disposition=inline&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEJD%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaDGV1LWNlbnRyYWwtMSJIMEYCIQD%2BA0JfH2H3jOk7TwP7ZQzMMiTzrYFiWGl7s0ZQBT49mwIhAPRsCdk1SUdfs%2BedQJAqJd8aZ%2FfLTDdcU46RYGdl14EaKo4DCLn%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEQABoMMzAyMjY3NjU0Mzk0Igwgtnkzl%2BENwAiJEcQq4gJFaOuUYNdr54VPJ0h6xD1iVsA0wlhvTFW%2Fyhc96%2FaRr%2FAay%2Be3KfUd%2BqloVB7qdvyf1pnsVApeUdeTJajILhQ%2FtOiWoVjVKGudZ7%2BgblCGcmQDa%2FKgJCVholdpTocXbU0rJwBiWnBaxN0HmjaHbvmH98C5oMPb%2BoB6fQuDI7%2F57ccofMGfdkCQCWXMwNmWj04hDxKHJX6CR0oxPTdQDsjERp%2Ft0%2FBBbfNlG%2B5klJmcPif3PbSHu7aBYUvN3jxlcQ9A5Uty4lpjbLn9PohReRc8j%2B5gxNLqcS2OT946ouPp7QWxzW7uMpiVZvNC91xMHm8WEg2yiKJENUm4bw8%2BMMfMXrcxVjqQUxkakfKfUir8KTphXZIt2foUo1ysg2OJAOSFffyIlcTLHR6rf9hdyHIduOUhv1lE8XTIVKKyigiQPkq%2BgJct%2FthZINs%2FpbDAoPMTKf7Us2UVS%2FBadsXE5WXjfu4wiZX4qQY6sgJ63v0BlQfYzUBHJqqVXgJnf7J%2FI2fehJYl7g0h%2BH%2BKSaaoLkSdQdvoboz1H92s%2FmcuBJO25eBWjPvN4qvkdOQldwBAKF7lJU17E%2B26IgqKyCADvXWq2jLO53H7KrbwZqswwoN19MrQ0rZ5RGSK6I6tki1XBK%2Bzhv5kQUcYJIE17Nk2TdJlH7nwC3hvqTQ0iUFVjpMIF8jvg9d48IrviQYFrWpKd7ffQXGiaZZRhUu0fzf%2FHMJDop7SDSu0799QcU%2BPMhTGMjvPjepcRyuRmnJb1aqC3UaRbMC3WMOGez2v2%2Bw2cvBA204r3rwlwMSF8o6rRHmt0TTbcXis6ZevcldVRHuDtHz2AUQ5IgTm%2BJzbZaAQLq1VifZlnvlraemtamKXJr1OXViaPfH1lNRWoTW1ea8%3D&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20231029T073408Z&X-Amz-SignedHeaders=host&X-Amz-Expires=32400&X-Amz-Credential=ASIAUMYEOMD5NDLYAWHP%2F20231029%2Feu-central-1%2Fs3%2Faws4_request&X-Amz-Signature=b511c8429dceef015c0064744a93354c2647fb97304d45087c3cddea0eb1df87"
       KEYSTORE_PASSWORD: "appdome"
       KEYSTORE_ALIAS: "appdome"
       KEYSTORE_KEY_PASSWORD: "appdome"
       FUSION_SET_ID:  "d2574330-5856-11ee-800b-a111bd4d22d3"
       SIGN_FINGERPRINT: "8DF593C1B6EAA6EADADCE36831FE82B08CAC8D74"
       GOOGLE-PLAY-SIGNING: true

       SECOND_OUTPUT: true
       OUTPUT_APP_NAME: "test_app.aab"
       BUILD_TO_TEST: "saucelabs"
       
   - name: Example of using Appdome secured app
     run: |
        echo ${{ env.APPDOME_SECURED_APP }}
        echo ${{ env.APPDOME_SECURED_APP_SECOND_OUTPUT }}
        echo $APPDOME_SECURED_APP
        echo $APPDOME_SECURED_APP_SECOND_OUTPUT
